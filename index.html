<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />

  <meta name="theme-color" content="#0b4ea2" />
  <title id="docTitle">클럽 수첩</title>

  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="stylesheet" href="./styles.css" />

<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>



</head>
<body>
  <header class="topbar">
  <button class="icon-btn" id="btnBack" aria-label="뒤로" hidden>←</button>

  <div class="brand">
    <img id="clubLogoSmall" class="brand-logo" alt="로고" src="./logo.png" />
    <div class="brand-title">
      <div id="districtText" class="brand-sub">국제라이온스협회 356-E지구</div>
      <div id="clubNameText" class="brand-main">북포항라이온스클럽</div>
    </div>
  </div>

<!-- 로그인 사용자 이름 -->
<div id="loginUserName" class="login-user" hidden>
  <span id="loginUserNameText"></span>


</div>

<!-- 관리자 버튼 (아이콘만) -->
<button id="btnAdmin" class="icon-btn" aria-label="관리자">
  ⚙
</button>










<!-- 로그아웃(전원 아이콘) -->
<button class="icon-btn" id="btnLogout" aria-label="로그아웃" title="로그아웃" hidden>
  <svg class="ico" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M11 2h2v10h-2V2zm6.36 3.64 1.41 1.41A9 9 0 1 1 5.23 7.05l1.41-1.41A7 7 0 1 0 17.36 5.64z"/>
  </svg>
</button>

</header>


 <main class="container">

  <!-- ✅ 자동로그인 로딩 화면(BOOT) : 딱 1개만 -->
  <section id="screenBoot" class="screen boot" hidden>
    <div class="boot-card">
      <img class="boot-logo" src="./logo.png" alt="로고" />
	<div class="boot-title" id="bootTitle">클럽명</div>
	<div class="boot-sub" id="bootSub">회원수첩</div>


      <div class="boot-loading">
        <span class="spinner" aria-hidden="true"></span>
        <span>로딩중...</span>
      </div>

      <div class="boot-tip">잠시만요, 데이터를 불러오는 중입니다.</div>
    </div>
  </section>

  <!-- 로그인 -->
  <section id="screenLogin" class="screen login-bg">
    <div class="card hero">

      <!-- ✅ hero-text는 딱 1개만 -->
      <div class="hero-text">
        <div class="hero-title">
          	<div class="title-main" id="loginTitleMain">클럽명</div>
	<div class="title-sub" id="loginTitleSub">회원수첩</div>

        </div>

        <div class="hero-desc">
          승인된 회원만 접속 가능합니다.<br />
          휴대폰번호(숫자만)와 접속코드를 입력해주세요.
        </div>
      </div>

      <label class="label">휴대폰번호</label>
<input id="inputPhone" class="input" inputmode="numeric" placeholder="01012345678" />

<label class="label">접속코드</label>
<div class="pw-wrap">
  <input id="inputCode" class="input" type="password" inputmode="numeric" placeholder="폰번호4자리" />
  <button type="button" id="btnTogglePw" class="pw-toggle">👁</button>
</div>

        <label class="checkline">
          <input id="keepLogin" type="checkbox" />
          <span>로그인 상태 유지</span>
        </label>

        <button id="btnLogin" class="btn primary">로그인</button>

        



        <div id="installHint" class="hint" hidden></div>

        <div id="loginError" class="error" hidden></div>
      </div>
    </div>


<!-- 🔽 로그인 카드 밖 액션 영역 -->
<div class="login-actions">
  <div class="install-row">
    <button id="btnInstallAndroid" class="btn install">
      안드로이드 앱 설치
    </button>
    <button id="btnInstallIOS" class="btn install ghost">
      아이폰 설치방법
    </button>
  </div>

  <button id="btnHardReload" class="reload-link">
    업데이트 문제가 있나요? 새로고침
  </button>
</div>



  </section>

  <!-- 이하 홈/멤버/공지/텍스트는 그대로 -->
    <!-- 홈 -->
  <section id="screenHome" class="screen" hidden>

<!-- ✅ 슬로건(큰 글씨, 꽉 차게) -->
<div class="slogan-box">
  <div class="slogan-text" id="sloganText">슬로건</div>
</div>

<!-- ✅ 아래 블럭(2줄: 00대 클럽명 / 지구명) -->
<div class="clubinfo-box">
  <div class="clubinfo-main" id="genClubText">제00대 클럽명</div>
  <div class="clubinfo-sub" id="districtText2">지구명</div>
</div>

 

    <div class="grid">
      <button class="tile" data-nav="members">
        <div class="tile-title">회원명부</div>
        <div class="tile-desc">검색 · 통화 · 문자 · 연락처저장</div>
      </button>
      <button class="tile" data-nav="announcements">
        <div class="tile-title">공지사항</div>
        <div class="tile-desc">관리자 공지 확인</div>
      </button>
      <button class="tile" data-nav="purpose">
        <div class="tile-title">클럽 목적 및 윤리 강령</div>
        <div class="tile-desc">목적&윤리강령</div>
      </button>
      <button class="tile" data-nav="bylaws">
        <div class="tile-title">회칙</div>
        <div class="tile-desc">회칙/규정</div>
      </button>




  <button class="tile" data-nav="calendar">

  <div class="tile-title">클럽일정표</div>
  <div class="tile-desc">월별 일정 확인</div>
</button>

<button class="tile tile-image" data-nav="song">
  <div class="tile-title">라이온스 노래</div>
  <div class="tile-desc">다시 만날때까지</div>
</button>

       <!-- 🔵 라이오니즘 -->
<button class="tile" data-nav="lionism">
  <div class="tile-title">라이오니즘...</div>
  <div class="tile-desc">지구 홈페이지</div>
</button>

<!-- 🔵 의전 -->
<button class="tile" data-nav="ceremony">
  <div class="tile-title">의 전</div>
  <div class="tile-desc">의전용 · 음악</div>
</button>






    </div>

    <div class="card mt16">
      <div class="card-header">
        <div class="card-title">최신 공지</div>
        <button class="link" data-nav="announcements">전체보기</button>
      </div>
      <div id="latestAnnouncements" class="list"></div>
    </div>

<!-- ✅ 회관/연락처/카피 (홈 하단) -->
    <div class="club-footer">
      <div id="hallAddress"></div>
      <div id="hallPhone"></div>
      <div id="copyrightText"></div>
    </div>




  </section>

<!-- 회원 -->
<section id="screenMembers" class="screen" hidden>
  <div class="card">

    <div class="card-header">
      <div class="card-title" style="display:flex;align-items:center;gap:6px;">
        회원명부
        <button
          id="btnMembersRefresh"
          class="icon-btn small"
          aria-label="회원명부 새로고침"
          title="회원명부 새로고침"
          type="button"
        >
          ↻
        </button>
      </div>

      <div class="pill" id="memberCountPill">0명</div>
    </div>

    <input
      id="memberSearch"
      class="input"
      placeholder="이름 / 직위 / 그룹 / 휴대폰 검색"
    />

    <div id="memberList" class="list mt12"></div>

  </div>
</section>


  <!-- 공지 -->
  <section id="screenAnnouncements" class="screen" hidden>
    <div class="card">
      <div class="card-header">
        <div class="card-header" style="display:flex;justify-content:space-between;align-items:center;">
  <div class="card-title">공지사항</div>
  <button id="btnAnnRefresh" class="btn-blue">↻ 새로고침</button>
</div>



      </div>
      <div id="annList" class="list"></div>
    </div>
  </section>

<section id="screenCalendar" class="screen" hidden>
  <div class="card">



<div class="calendar-header">
  <h2 id="calendarTitle">📅 클럽일정표</h2>
  <button id="btnCalendarRefresh" class="btn-blue">↻ 새로고침</button>
</div>


    <!-- 🔥 여기 추가 -->
    <div id="calendarLoading" style="
      text-align:center;
      padding:40px 0;
      color:#64748b;
      font-size:15px;
    ">
      📅 일정을 불러오는 중....
    </div>

    <div id="calendar"></div>
  </div>
</section>




<section id="screenEvents" class="screen" hidden>
  <div class="card">
    <h3>📅 클럽일정표</h3>
    <div id="eventsList">불러오는 중...</div>
  </div>
</section>




  <!-- 텍스트 -->
  <section id="screenText" class="screen" hidden>

  <!-- ✅ 내부 스크롤 컨테이너 추가 -->
  <div class="text-scroll">

    <div class="card">
      <div class="card-header">
        <div class="card-title" id="textTitle">제목</div>
        <a id="btnBylawsPdf" class="pdf-btn" href="#" target="_blank" rel="noopener" hidden>원본PDF</a>
      </div>

      <div id="textBody" class="prose"></div>
    </div>

  </div>

</section>

<!-- 🔵 라이오니즘 화면 -->
<section id="screenLionism" class="screen" hidden>


  <div class="card">
    <div class="card-title">라이오니즘</div>
    <div class="prose">라이오니즘 내용 준비중...</div>
  </div>
</section>


<section id="screenCeremony" class="screen" hidden>

  <div class="card">
    <div class="card-title">의 전</div>

    <div class="ceremony-grid">

   <div class="ceremony-card" onclick="playCeremony('./audio/anthem.wav', this)">
  <div class="ceremony-icon">🇰🇷</div>
  <div class="ceremony-name">애국가</div>
</div>

<div class="ceremony-card" onclick="playCeremony('./audio/salute.wav', this)">
  <div class="ceremony-icon">🎖️</div>
  <div class="ceremony-name">국기에 대한 경례</div>
</div>

<div class="ceremony-card" onclick="playCeremony('./audio/silence.wav', this)">
  <div class="ceremony-icon">🕯️</div>
  <div class="ceremony-name">묵념 나레이션</div>
</div>

<div class="ceremony-card" onclick="playCeremony('./audio/lions.mp3', this)">
  <div class="ceremony-icon">🦁</div>
  <div class="ceremony-name">라이온스 노래</div>
</div>

    </div>

  </div>

</section>





<!-- ===== 프로필 확대 팝업 ===== -->
<div id="profileModal" class="modal" hidden>

  <div class="modal-backdrop" onclick="closeProfile()"></div>
  <div class="modal-card">
    <img id="modalPhoto" class="modal-photo" />

<div class="modal-name-row">
  <div class="modal-name" id="modalName"></div>
  <span class="badge" id="modalPosition"></span>
  <span class="badge" id="modalGroup"></span>   <!-- ⭐ 이거 추가 -->
</div>


<!-- 주소 + 지도 버튼 -->
<div class="modal-address-row">
  <button id="btnMap" class="a-btn primary" type="button">📍 지도</button>
  <div class="modal-workplace" id="modalWorkplace"></div>
</div>

<!-- 🔽 추가 정보 -->
<div class="modal-engname" id="modalEngName"></div>

<div class="modal-memberinfo" id="modalMemberInfo"></div>

<div class="modal-recommender" id="modalRecommender"></div>


<div class="modal-phone" id="modalPhone"></div>


    <div class="modal-actions">
      <a id="modalCall" class="a-btn primary">📞 통화</a>
      <a id="modalSms" class="a-btn">💬 문자</a>
    </div>


<!-- ⭐ 내정보 전용 (내 프로필일 때만 보임) -->
<div class="modal-actions" id="myMessageRow" hidden>
  
</div>


    <button class="modal-close" onclick="closeProfile()">닫기</button>
  </div>
</div>


<!-- ===== 공지 상세 모달 ===== -->
<div id="annModal" class="modal" hidden>
  <div class="modal-backdrop" onclick="closeAnnModal()"></div>
  <div class="modal-card" style="width:min(94vw,560px);text-align:left;">
    <div style="font-weight:950;font-size:18px;" id="annModalTitle"></div>
    <div style="color:#64748b;font-size:13px;margin-top:6px;" id="annModalMeta"></div>
    <div style="margin-top:12px;white-space:pre-wrap;line-height:1.65;" id="annModalBody"></div>
    <button class="modal-close" onclick="closeAnnModal()">닫기</button>
  </div>
</div>



<!-- ===== 이미지 보기 모달(라이온스 노래) ===== -->
<div id="imgModal" class="modal" hidden>
  <div class="modal-backdrop" onclick="closeImgModal()"></div>
  <div class="modal-card" style="width:min(96vw,520px);padding:12px;">
    <img id="imgModalPhoto" style="width:100%;height:auto;border-radius:14px;display:block;" />
    <button class="modal-close" onclick="closeImgModal()">닫기</button>
  </div>
</div>

</main>

<script src="./config.js"></script>
<script src="./app.js"></script>



<!-- ✅ 공용 모달 -->
<div id="modal" class="modal" hidden>
  <div class="modal-backdrop" onclick="closeModal()"></div>
  <div class="modal-card">
    <div id="modalBody"></div>
    <button class="modal-close" onclick="closeModal()">닫기</button>
  </div>
</div>


<div id="toast" hidden
  style="
    position:fixed;
    left:50%;
    bottom:70px;
    transform:translateX(-50%);
    background:rgba(0,0,0,.85);
    color:#fff;
    padding:10px 14px;
    border-radius:14px;
    font-size:14px;
    z-index:9999;
    pointer-events:none;
  ">
</div>



<div id="holdOverlay" hidden>
  <svg viewBox="0 0 36 36">
    <circle cx="18" cy="18" r="16"></circle>
  </svg>
</div>


</body>
</html>


